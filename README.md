# MeteoStation

## Описание проекта

**MeteoStation** — это проект для интеграции метеостанции MISOL WH24P UART с микроконтроллером ESP8266. Система собирает данные о погодных условиях с метеостанции и передает их на MQTT-брокер. Включена поддержка OTA (Over-The-Air) обновлений, что позволяет обновлять прошивку устройства удаленно.

## Особенности

- **Подключение к Wi-Fi**: Автоматическое подключение к Wi-Fi с возможностью задания статического IP-адреса. При невозможности подключения устройство автоматически перезагружается.
- **Интеграция с MISOL WH24P UART**: Поддержка работы с метеостанцией MISOL WH24P UART для получения данных о погоде.
- **MQTT-протокол**: Передача собранных данных (температура, влажность, давление, скорость ветра и другие параметры) на MQTT-брокер.
- **Обработка команд**: Возможность управления устройством через MQTT-команды, включая перезагрузку и запрос текущего статуса.
- **Поддержка OTA**: Обновление прошивки через Wi-Fi без физического доступа к устройству.
- **Детализированные логи**: Логирование отладочной информации и состояния устройства в MQTT.

## Установка

### Клонирование репозитория

```sh
git clone https://github.com/yourusername/MeteoStation.git
cd MeteoStation
```
**Установка библиотек**
Установите следующие библиотеки через библиотечный менеджер Arduino IDE:

ESP8266WiFi
PubSubClient
ArduinoOTA
ArduinoJson

**Настройка параметров**
В файле wifi.h укажите SSID и пароль для подключения к Wi-Fi.
В файле mqtt.h настройте параметры подключения к вашему MQTT-брокеру.
Настройте параметры метеостанции MISOL WH24P UART.

**Загрузка прошивки**
Загрузите прошивку на ESP8266 и убедитесь, что устройство подключено к Wi-Fi и MQTT-брокеру.

**Использование**
Сбор данных: После запуска устройство собирает данные с метеостанции MISOL WH24P UART и отправляет их на MQTT-брокер.
Отправка команд: Через MQTT можно отправлять команды для управления устройством.
Мониторинг: Отладочные сообщения отправляются на MQTT для удобного мониторинга.

**Передача данных в формате JSON:**
```sh
{
  "Temp": 23.5,
  "Hum": 65,
  "Press": 755.5,
  "WindDir": 180,
  "WindSpeed": 3.4,
  "RainAccum": 0.0,
  "UVIndex": 2,
  "Light": 850.0
}
```
**Структура проекта**
MeteoStation.ino: Главный файл проекта.
wifi.h и wifi.cpp: Подключение и управление Wi-Fi.
mqtt.h и mqtt.cpp: Подключение и передача данных через MQTT.
ota.h и ota.cpp: Поддержка OTA обновлений.
sensors.h и sensors.cpp: Обработка данных с метеостанции MISOL WH24P UART.

----------------------------------------------------------------------------------------------------
**Лицензия**
Проект распространяется под лицензией MIT. 
Смотрите файл LICENSE для получения дополнительной информации.
